<?phpnamespace Doula_Course\App\Tmpl;use Doula_Course\App\Clss\Section_List; use Doula_Course\App\Clss\Assignment; if ( ! defined( 'ABSPATH' ) ) { exit; }// Course Functions// // Functions and blocks of code that are specific to course templates. $section_list = new Section_List();//toggle between section pages and assignment/content pages.if( isset( $material_type ) ){	$child_of = ( $material_type == 'section' )? get_the_ID() : $post->post_parent; } else {	$child_of = '';}$list_args = array(	'title_li'=>"",	'post_type'=>"material", 	'depth'=>"1", 	'child_of'=> $child_of,	'sort_column'=>"menu_order",	'walker' => $section_list);//NB COURSE NAV BAR//used on the course assignment and content templates. function course_nav_bar(){		global $post; 		$ancs =  array_reverse( get_post_ancestors( $post->ID ) ); //returns an array. Closest at top, farthest is at the bottom. 	/* echo "Post Ancestors:";	print_pre( $ancs );	$ancs_num = sizeof($ancs);	$course_pos = intval($ancs_num - 1);	$cert_title = 	$course_title = breadcrumb_link( $ancs[$course_pos] );	$unit_title = breadcrumb_link( $ancs[0] ); */	$course_type = intval( get_post_meta($post->ID, 'course_type', true) );		echo '<div class="course-nav-title">Course Navigation:</div>';		if( $course_type !== 2 ){ //2 = section, show only next and previous tabs if in content or assignments. 		$prev_course = content_siblings("prev");		$next_course = content_siblings("next");		echo '<ul class="course-nav-pag">';								if( !empty( $prev_course ) )			echo "<li class='prev'><a href='$prev_course' >&lsaquo; Prev</a></li>"; 		if( !empty( $next_course ) )			echo "<li class='next'><a href='$next_course'>Next &rsaquo;</a></li>"; 					echo "</ul>";	}			echo "<div class='course-nav-unit'><a href='".home_url()."'>Home</a> / <a href='".home_url('/manuals/')."' >Manuals</a>";		foreach( $ancs as $anc_id){		$bread_title = breadcrumb_link( $anc_id );		echo " / $bread_title";	}	/* echo ( !empty( $course_title ) )? "/ $course_title" : '' ; 	echo ( strcmp($course_title, $unit_title) !== 0 )? " / $unit_title" : ''; 	//don't show if same as first link.  */	echo "</div>";}//NB BREADCRUMB LINKfunction breadcrumb_link( $postID ){		return ( !empty( $postID ) )? '<a href="'.get_permalink( $postID ).'" >'.get_the_title( $postID ).'</a>' : NULL ;	}//NB CONTENT SIBLINGS//used for finding next-door neighbors in content.function content_siblings( $link ) {    global $post;		$page_args = array(		'child_of' => intval( $post->post_parent ),		'sort_column' => 'menu_order',		'post_type' => 'material'	);			$pages = get_pages( $page_args );		//print_pre( $pages , "Page" );		if( $pages ) {		$pageids = array();		foreach ($pages as $page) {			$pageids[]= $page->ID;		}	}	    foreach ($pageids as $key => $sibling){        if ($post->ID == $sibling)            $curID = $key;    } 		if( $curID > 0 && $link == 'prev' )		return get_permalink($pageids[$curID-1]);			if( $curID < ( sizeof($pageids) - 1 ) && $link == 'next' )		return get_permalink($pageids[$curID+1]);		return NULL; 	}?>